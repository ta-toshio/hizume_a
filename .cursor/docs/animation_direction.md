# 演出効果・アニメーション仕様書

## 📝 概要

本仕様書では、馬育成・レースゲームにおける視覚的なフィードバックと演出効果について定義します。これらの演出は、プレイヤーの操作に対する反応や成果の可視化を通じて、ゲーム体験を豊かにする重要な要素です。

---

## 🎭 演出カテゴリと目的

### 1. 強化・育成演出
- **目的**: トレーニングの成果や成長を視覚的に強調し、達成感を与える
- **対象**: ステータス上昇、スキル開花、装備熟度上昇など

### 2. システム状態演出
- **目的**: ゲームシステムの状態変化を直感的に伝える
- **対象**: チャクラ共鳴、疲労状態、補助ゲージ蓄積など

### 3. 競争・結果演出
- **目的**: レース中の状況変化や結果を臨場感あるものにする
- **対象**: スキル発動、順位変動、最終結果など

### 4. UI遷移・反応演出
- **目的**: ユーザー操作への反応を示し、操作感を向上させる
- **対象**: ボタン押下、画面遷移、選択肢確定など

---

## 🌟 実装予定の主要演出

### ✅ 1. 育成結果画面の演出

| 演出要素 | 実装内容 | 技術的アプローチ |
|--------|--------|-------------|
| **ランク表示演出** | ランクに応じた色と輝き<br>- S: 金色の光輪<br>- A: 金銀の光彩<br>- B: 銀色の光<br>- C以下: 標準表示 | Color Modulation + Particle効果 |
| **スコア加算演出** | 各評価項目が順にカウントアップ<br>最終スコアが大きく表示される | Tween Animation + ラベルアニメーション |
| **ステータスグラフ** | 棒グラフが伸びていくアニメーション | ProgressBar + Tween |

### ✅ 2. スキル開花演出

| 演出要素 | 実装内容 | 技術的アプローチ |
|--------|--------|-------------|
| **開花エフェクト** | スキル開花時に紫～青の波紋拡散 | 同心円ShaderEffect + アルファフェード |
| **スキル名表示** | スキル名が大きく表示<br>カテゴリ別の色付け | ラベルスケールアニメーション + カラーコード |
| **習得通知** | 「新たな技が閃いた！」などのメッセージ<br>通知音 | ポップアップウィンドウ + オーディオストリーム |

### ✅ 3. チャクラ共鳴エフェクト

| 演出要素 | 実装内容 | 技術的アプローチ |
|--------|--------|-------------|
| **波紋エフェクト** | 共鳴時に波紋が広がる<br>カテゴリに応じた色調 | ShaderMaterial + Animationプレーヤー |
| **光彩効果** | キャラクター/フレームの輝き | OutlineShader + カラーモジュレーション |
| **メッセージ** | 専用テキスト表示 | RichTextLabel + フェードイン/アウト |

### ✅ 4. レース演出

| 演出要素 | 実装内容 | 技術的アプローチ |
|--------|--------|-------------|
| **スキル発動** | 馬アイコンからの光/波紋<br>スキル効果テキスト | Sprite + Particles<br>アニメーションレイヤー |
| **順位変動** | 滑らかなアイコン移動 | Tween位置アニメーション |
| **結果演出** | 勝利/敗北に応じた特殊効果 | 画面エフェクト + パーティクル |

---

## 🎨 デザイン指針とカラーコード

### 基本カラーパレット

| 要素 | 色調 | カラーコード |
|-----|-----|-----------|
| 共鳴演出（基本） | 紫～青のグラデーション | `#8A2BE2` → `#4169E1` |
| 速力系 | 青系 | `#1E90FF` |
| 精神系 | 紫系 | `#9370DB` |
| 柔軟系 | 緑系 | `#3CB371` |
| 技術系 | 橙系 | `#FF8C00` |
| 展開系 | 灰青系 | `#708090` |
| 持久系 | 赤系 | `#CD5C5C` |

### 音響効果方針
- 和風の鈴・笛の音を基調
- 重要な演出時は低音の和太鼓も使用
- UI操作時は軽快でクリアな効果音

---

## 🔧 実装プラン

### 実装フェーズ

| フェーズ | 内容 | 優先度 |
|--------|-----|------|
| Phase 1 | 基本シェーダー素材とパーティクルシステムの構築 | 高 |
| Phase 2 | トレーニング画面のチャクラ共鳴演出実装 | 高 |
| Phase 3 | スキル開花演出の実装 | 中 |
| Phase 4 | レース演出の実装 | 中 |
| Phase 5 | 育成結果画面の視覚効果強化 | 中 |
| Phase 6 | UI全体の遷移アニメーション調整 | 低 |

### テクニカルアプローチ

1. **基本パーティクルシステム**
   - 共通のパーティクルリソース作成
   - エミッターの設計と再利用可能な構成

2. **波紋シェーダー**
   - 同心円エフェクト用のシェーダーコード
   - カラーグラデーション制御パラメータ

3. **ツイーンアニメーション**
   - UI要素の移動・拡大縮小
   - スケールや透明度の変化

4. **サウンドマネージャー**
   - 効果音の一元管理
   - 演出と音響の同期処理

---

## 📊 実装優先順位

1. **最重要（MVP）**:
   - チャクラ共鳴の波紋エフェクト
   - スキル開花通知アニメーション
   - レースでのスキル発動表示

2. **重要**:
   - ステータス変動の視覚フィードバック
   - 疲労・状態変化の色彩表現
   - 順位変動アニメーション

3. **あると良い**:
   - UI全体の遷移エフェクト
   - 装飾的なパーティクル効果
   - 細かい操作フィードバック

---

## 🚀 実装完了機能

### 1. 基本システム
- [x] EffectManagerシングルトン作成
- [x] 波紋シェーダーエフェクト実装
- [x] 画面遷移エフェクトシステム実装
- [x] ステータス変化表示機能

### 2. トレーニング画面演出
- [x] チャクラ共鳴エフェクト
- [x] スキル開花エフェクト
- [x] ステータス上昇表示

### 3. レース画面演出
- [x] スキル発動エフェクト
- [x] スキル名ポップアップ表示

### 4. 結果画面演出
- [x] ランク別表示アニメーション
- [x] スコアカウントアップエフェクト
- [x] ランク固有の特殊効果

### 5. 画面遷移エフェクト
- [x] トレーニング→レース画面
- [x] レース→トレーニング/結果画面
- [x] 育成完了時の結果画面遷移
- [x] 複数種類の遷移エフェクト
  - [x] フェード
  - [x] サークル
  - [x] ワイプ
  - [x] ズーム 